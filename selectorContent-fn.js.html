<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>selectorContent-fn.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AnsiColors.html">AnsiColors</a></li><li><a href="ArithmeticException.html">ArithmeticException</a></li><li><a href="Exception.html">Exception</a></li><li><a href="GestorBuffersImagen.html">GestorBuffersImagen</a><ul class='methods'><li data-type='method'><a href="GestorBuffersImagen.html#agregar">agregar</a></li><li data-type='method'><a href="GestorBuffersImagen.html#guardarTodos">guardarTodos</a></li><li data-type='method'><a href="GestorBuffersImagen.html#listar">listar</a></li><li data-type='method'><a href="GestorBuffersImagen.html#obtener">obtener</a></li></ul></li><li><a href="HttpClientException.html">HttpClientException</a></li><li><a href="IllegalArgumentException.html">IllegalArgumentException</a></li><li><a href="IllegalFormatException.html">IllegalFormatException</a></li><li><a href="IndexOutOfBoundsException.html">IndexOutOfBoundsException</a></li><li><a href="Logger.html">Logger</a><ul class='methods'><li data-type='method'><a href="Logger.html#.error">error</a></li><li data-type='method'><a href="Logger.html#.info">info</a></li><li data-type='method'><a href="Logger.html#.log">log</a></li><li data-type='method'><a href="Logger.html#.success">success</a></li><li data-type='method'><a href="Logger.html#.warning">warning</a></li></ul></li><li><a href="NullPointerException.html">NullPointerException</a></li><li><a href="OutOfMemoryException.html">OutOfMemoryException</a></li><li><a href="SelectorContent.html">SelectorContent</a><ul class='methods'><li data-type='method'><a href="SelectorContent.html#elementsToArray">elementsToArray</a></li><li data-type='method'><a href="SelectorContent.html#getAttributeValue">getAttributeValue</a></li><li data-type='method'><a href="SelectorContent.html#getCleanText">getCleanText</a></li><li data-type='method'><a href="SelectorContent.html#getContent">getContent</a></li><li data-type='method'><a href="SelectorContent.html#getElements">getElements</a></li><li data-type='method'><a href="SelectorContent.html#getHtml">getHtml</a></li><li data-type='method'><a href="SelectorContent.html#getValueOrDefault">getValueOrDefault</a></li><li data-type='method'><a href="SelectorContent.html#processMultipleSelectors">processMultipleSelectors</a></li><li data-type='method'><a href="SelectorContent.html#processSelector">processSelector</a></li><li data-type='method'><a href="SelectorContent.html#processSingleSelector">processSingleSelector</a></li></ul></li><li><a href="Sequence.html">Sequence</a><ul class='methods'><li data-type='method'><a href="Sequence.html#next">next</a></li></ul></li><li><a href="Task.html">Task</a><ul class='methods'><li data-type='method'><a href="Task.html#catch">catch</a></li><li data-type='method'><a href="Task.html#map">map</a></li><li data-type='method'><a href="Task.html#run">run</a></li><li data-type='method'><a href="Task.html#tap">tap</a></li><li data-type='method'><a href="Task.html#.from">from</a></li></ul></li><li><a href="TypeCastException.html">TypeCastException</a></li><li><a href="TypeMismatchException.html">TypeMismatchException</a></li><li><a href="UnsupportedOperationException.html">UnsupportedOperationException</a></li><li><a href="UserAgentRotatorFn.html">UserAgentRotatorFn</a><ul class='methods'><li data-type='method'><a href="UserAgentRotatorFn.html#addUserAgent">addUserAgent</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#filterUserAgents">filterUserAgents</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#getCurrent">getCurrent</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#getInfo">getInfo</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#getNext">getNext</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#getRandom">getRandom</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#reset">reset</a></li><li data-type='method'><a href="UserAgentRotatorFn.html#setType">setType</a></li></ul></li><li><a href="UtilsArrays.html">UtilsArrays</a><ul class='methods'><li data-type='method'><a href="UtilsArrays.html#.accumulate">accumulate</a></li><li data-type='method'><a href="UtilsArrays.html#.average">average</a></li><li data-type='method'><a href="UtilsArrays.html#.chunk">chunk</a></li><li data-type='method'><a href="UtilsArrays.html#.countOccurrences">countOccurrences</a></li><li data-type='method'><a href="UtilsArrays.html#.firstIndex">firstIndex</a></li><li data-type='method'><a href="UtilsArrays.html#.firstObjMatch">firstObjMatch</a></li><li data-type='method'><a href="UtilsArrays.html#.generateObjectArray">generateObjectArray</a></li><li data-type='method'><a href="UtilsArrays.html#.getIntersection">getIntersection</a></li><li data-type='method'><a href="UtilsArrays.html#.indexOfMax">indexOfMax</a></li><li data-type='method'><a href="UtilsArrays.html#.indexOfMin">indexOfMin</a></li><li data-type='method'><a href="UtilsArrays.html#.indices">indices</a></li><li data-type='method'><a href="UtilsArrays.html#.insertElements">insertElements</a></li><li data-type='method'><a href="UtilsArrays.html#.isEqualArray">isEqualArray</a></li><li data-type='method'><a href="UtilsArrays.html#.lastIndex">lastIndex</a></li><li data-type='method'><a href="UtilsArrays.html#.partition">partition</a></li><li data-type='method'><a href="UtilsArrays.html#.randomItem">randomItem</a></li><li data-type='method'><a href="UtilsArrays.html#.range">range</a></li><li data-type='method'><a href="UtilsArrays.html#.removeDuplicate">removeDuplicate</a></li><li data-type='method'><a href="UtilsArrays.html#.removeDuplicatesArrObj">removeDuplicatesArrObj</a></li><li data-type='method'><a href="UtilsArrays.html#.shuffle">shuffle</a></li><li data-type='method'><a href="UtilsArrays.html#.sortElementsByArrayOfText">sortElementsByArrayOfText</a></li><li data-type='method'><a href="UtilsArrays.html#.swapItems">swapItems</a></li><li data-type='method'><a href="UtilsArrays.html#.unionArrays">unionArrays</a></li></ul></li><li><a href="UtilsNumbers.html">UtilsNumbers</a><ul class='methods'><li data-type='method'><a href="UtilsNumbers.html#.arithmeticProgression">arithmeticProgression</a></li><li data-type='method'><a href="UtilsNumbers.html#.factorial">factorial</a></li><li data-type='method'><a href="UtilsNumbers.html#.fibonacci">fibonacci</a></li><li data-type='method'><a href="UtilsNumbers.html#.gcdMultiple">gcdMultiple</a></li><li data-type='method'><a href="UtilsNumbers.html#.geometricProgression">geometricProgression</a></li><li data-type='method'><a href="UtilsNumbers.html#.lcmMultiple">lcmMultiple</a></li><li data-type='method'><a href="UtilsNumbers.html#.logBase">logBase</a></li><li data-type='method'><a href="UtilsNumbers.html#.randomIntArrayInRange">randomIntArrayInRange</a></li><li data-type='method'><a href="UtilsNumbers.html#.randomNumberGenerator">randomNumberGenerator</a></li><li data-type='method'><a href="UtilsNumbers.html#.roundNumber">roundNumber</a></li><li data-type='method'><a href="UtilsNumbers.html#.toFixed">toFixed</a></li></ul></li><li><a href="UtilsObject.html">UtilsObject</a><ul class='methods'><li data-type='method'><a href="UtilsObject.html#.combinedObjectWithArrays">combinedObjectWithArrays</a></li><li data-type='method'><a href="UtilsObject.html#.commonKeys">commonKeys</a></li><li data-type='method'><a href="UtilsObject.html#.countBy">countBy</a></li><li data-type='method'><a href="UtilsObject.html#.getCommonKeys">getCommonKeys</a></li><li data-type='method'><a href="UtilsObject.html#.getObjFromKey">getObjFromKey</a></li><li data-type='method'><a href="UtilsObject.html#.groupBy">groupBy</a></li><li data-type='method'><a href="UtilsObject.html#.isEqualObj">isEqualObj</a></li><li data-type='method'><a href="UtilsObject.html#.maxBy">maxBy</a></li><li data-type='method'><a href="UtilsObject.html#.minBy">minBy</a></li><li data-type='method'><a href="UtilsObject.html#.pluck">pluck</a></li><li data-type='method'><a href="UtilsObject.html#.removeArrayFromValues">removeArrayFromValues</a></li><li data-type='method'><a href="UtilsObject.html#.removeDuplicatesByProperty">removeDuplicatesByProperty</a></li><li data-type='method'><a href="UtilsObject.html#.removeDuplicatesFromValues">removeDuplicatesFromValues</a></li><li data-type='method'><a href="UtilsObject.html#.removeNullUndefined">removeNullUndefined</a></li><li data-type='method'><a href="UtilsObject.html#.removeObjectSafely">removeObjectSafely</a></li><li data-type='method'><a href="UtilsObject.html#.renameKeys">renameKeys</a></li><li data-type='method'><a href="UtilsObject.html#.sortBy">sortBy</a></li><li data-type='method'><a href="UtilsObject.html#.sortObj">sortObj</a></li><li data-type='method'><a href="UtilsObject.html#.splitObjInKeys">splitObjInKeys</a></li><li data-type='method'><a href="UtilsObject.html#.toObject">toObject</a></li></ul></li><li><a href="UtilsString.html">UtilsString</a><ul class='methods'><li data-type='method'><a href="UtilsString.html#.bytesString">bytesString</a></li><li data-type='method'><a href="UtilsString.html#.camelToKebab">camelToKebab</a></li><li data-type='method'><a href="UtilsString.html#.capitalize">capitalize</a></li><li data-type='method'><a href="UtilsString.html#.characterCount">characterCount</a></li><li data-type='method'><a href="UtilsString.html#.cleanText">cleanText</a></li><li data-type='method'><a href="UtilsString.html#.concatWS">concatWS</a></li><li data-type='method'><a href="UtilsString.html#.countWords">countWords</a></li><li data-type='method'><a href="UtilsString.html#.decodeHtmlEntities">decodeHtmlEntities</a></li><li data-type='method'><a href="UtilsString.html#.decomposeUrl">decomposeUrl</a></li><li data-type='method'><a href="UtilsString.html#.ext">ext</a></li><li data-type='method'><a href="UtilsString.html#.extractNumber">extractNumber</a></li><li data-type='method'><a href="UtilsString.html#.generateString">generateString</a></li><li data-type='method'><a href="UtilsString.html#.isPalindrome">isPalindrome</a></li><li data-type='method'><a href="UtilsString.html#.kebabToCamel">kebabToCamel</a></li><li data-type='method'><a href="UtilsString.html#.mask">mask</a></li><li data-type='method'><a href="UtilsString.html#.prependNumbers">prependNumbers</a></li><li data-type='method'><a href="UtilsString.html#.removeAcents">removeAcents</a></li><li data-type='method'><a href="UtilsString.html#.removeEmptyLines">removeEmptyLines</a></li><li data-type='method'><a href="UtilsString.html#.replaceSpaces">replaceSpaces</a></li><li data-type='method'><a href="UtilsString.html#.slugify">slugify</a></li><li data-type='method'><a href="UtilsString.html#.sortLines">sortLines</a></li><li data-type='method'><a href="UtilsString.html#.toCamelCase">toCamelCase</a></li><li data-type='method'><a href="UtilsString.html#.toPascalCase">toPascalCase</a></li><li data-type='method'><a href="UtilsString.html#.trim">trim</a></li><li data-type='method'><a href="UtilsString.html#.truncate">truncate</a></li><li data-type='method'><a href="UtilsString.html#.upperCaseWords">upperCaseWords</a></li></ul></li><li><a href="Validator.html">Validator</a><ul class='methods'><li data-type='method'><a href="Validator.html#.areArraySame">areArraySame</a></li><li data-type='method'><a href="Validator.html#.indexInRange">indexInRange</a></li><li data-type='method'><a href="Validator.html#.isArray">isArray</a></li><li data-type='method'><a href="Validator.html#.isBigInt">isBigInt</a></li><li data-type='method'><a href="Validator.html#.isBoolean">isBoolean</a></li><li data-type='method'><a href="Validator.html#.isEmpty">isEmpty</a></li><li data-type='method'><a href="Validator.html#.isEncoded">isEncoded</a></li><li data-type='method'><a href="Validator.html#.isFloat">isFloat</a></li><li data-type='method'><a href="Validator.html#.isFunction">isFunction</a></li><li data-type='method'><a href="Validator.html#.isInteger">isInteger</a></li><li data-type='method'><a href="Validator.html#.isNil">isNil</a></li><li data-type='method'><a href="Validator.html#.isNull">isNull</a></li><li data-type='method'><a href="Validator.html#.isNumber">isNumber</a></li><li data-type='method'><a href="Validator.html#.isObject">isObject</a></li><li data-type='method'><a href="Validator.html#.isOneDimensional">isOneDimensional</a></li><li data-type='method'><a href="Validator.html#.isString">isString</a></li><li data-type='method'><a href="Validator.html#.isSymbol">isSymbol</a></li><li data-type='method'><a href="Validator.html#.isType">isType</a></li><li data-type='method'><a href="Validator.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="Validator.html#.isValidType">isValidType</a></li><li data-type='method'><a href="Validator.html#.validateObject">validateObject</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Various.html">Various</a><ul class='methods'><li data-type='method'><a href="module-Various.html#.applyMixins">applyMixins</a></li><li data-type='method'><a href="module-Various.html#.bubbleSort">bubbleSort</a></li><li data-type='method'><a href="module-Various.html#.bucketSort">bucketSort</a></li><li data-type='method'><a href="module-Various.html#.convertirMilisegundos">convertirMilisegundos</a></li><li data-type='method'><a href="module-Various.html#.decimalToHex">decimalToHex</a></li><li data-type='method'><a href="module-Various.html#.decodeJWT">decodeJWT</a></li><li data-type='method'><a href="module-Various.html#.generateShades">generateShades</a></li><li data-type='method'><a href="module-Various.html#.generateUniqueId">generateUniqueId</a></li><li data-type='method'><a href="module-Various.html#.getComplementaryColor">getComplementaryColor</a></li><li data-type='method'><a href="module-Various.html#.getMaxByProperty">getMaxByProperty</a></li><li data-type='method'><a href="module-Various.html#.getSuplementaryColor">getSuplementaryColor</a></li><li data-type='method'><a href="module-Various.html#.getTypeOf">getTypeOf</a></li><li data-type='method'><a href="module-Various.html#.getVariablesInText">getVariablesInText</a></li><li data-type='method'><a href="module-Various.html#.heapsort">heapsort</a></li><li data-type='method'><a href="module-Various.html#.hexToDecimal">hexToDecimal</a></li><li data-type='method'><a href="module-Various.html#.hexToHSL">hexToHSL</a></li><li data-type='method'><a href="module-Various.html#.hexToRgb">hexToRgb</a></li><li data-type='method'><a href="module-Various.html#.hslToHex">hslToHex</a></li><li data-type='method'><a href="module-Various.html#.hslToRgb">hslToRgb</a></li><li data-type='method'><a href="module-Various.html#.insertionSort">insertionSort</a></li><li data-type='method'><a href="module-Various.html#.measureAsyncFn">measureAsyncFn</a></li><li data-type='method'><a href="module-Various.html#.measureSyncFn">measureSyncFn</a></li><li data-type='method'><a href="module-Various.html#.mergeSort">mergeSort</a></li><li data-type='method'><a href="module-Various.html#.myDecodeURI">myDecodeURI</a></li><li data-type='method'><a href="module-Various.html#.myEncodeURI">myEncodeURI</a></li><li data-type='method'><a href="module-Various.html#.normalizeUrl">normalizeUrl</a></li><li data-type='method'><a href="module-Various.html#.parseJSONToString">parseJSONToString</a></li><li data-type='method'><a href="module-Various.html#.parseStringToJSON">parseStringToJSON</a></li><li data-type='method'><a href="module-Various.html#.pipe">pipe</a></li><li data-type='method'><a href="module-Various.html#.quickSort">quickSort</a></li><li data-type='method'><a href="module-Various.html#.randomBoolean">randomBoolean</a></li><li data-type='method'><a href="module-Various.html#.randomColorHex">randomColorHex</a></li><li data-type='method'><a href="module-Various.html#.rgbToHex">rgbToHex</a></li><li data-type='method'><a href="module-Various.html#.rgbToHsl">rgbToHsl</a></li><li data-type='method'><a href="module-Various.html#.secondsToTimeString">secondsToTimeString</a></li><li data-type='method'><a href="module-Various.html#.selectionSort">selectionSort</a></li><li data-type='method'><a href="module-Various.html#.timeStringToSeconds">timeStringToSeconds</a></li><li data-type='method'><a href="module-Various.html#.timestampToutc">timestampToutc</a></li><li data-type='method'><a href="module-Various.html#.wait">wait</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#analizarBuffer">analizarBuffer</a></li><li><a href="global.html#base64ABuffer">base64ABuffer</a></li><li><a href="global.html#bufferAFormatos">bufferAFormatos</a></li><li><a href="global.html#bufferAImagen">bufferAImagen</a></li><li><a href="global.html#bufferAImagenAsync">bufferAImagenAsync</a></li><li><a href="global.html#compararBuffers">compararBuffers</a></li><li><a href="global.html#crearHashImagen">crearHashImagen</a></li><li><a href="global.html#descargarImagenABuffer">descargarImagenABuffer</a></li><li><a href="global.html#detectarFormato">detectarFormato</a></li><li><a href="global.html#esImagenValida">esImagenValida</a></li><li><a href="global.html#guardarConMetadatos">guardarConMetadatos</a></li><li><a href="global.html#guardarImagenConFormato">guardarImagenConFormato</a></li><li><a href="global.html#streamABuffer">streamABuffer</a></li><li><a href="global.html#validarBufferImagen">validarBufferImagen</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">selectorContent-fn.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Clase para seleccionar y extraer contenido de una página web utilizando Cheerio y un validador.
 */
export class SelectorContent {
    $ = null;
    validator = null;

    /**
     * @param {Function} $ - Función de selección (por ejemplo, Cheerio o jQuery).
     * @param {Object} validator - Objeto validador con métodos de validación.
     */
    constructor($, validator) {
        this.$ = $;
        this.validator = validator;
    }

    /**
     * Obtiene contenido basado en selectores con fallbacks
     * @param {Object} options - Opciones de configuración
     * @param {string|Array} options.selectors - Selector único o array de selectores
     * @param {*} options.defaultValue - Valor predeterminado si no se encuentra contenido
     * @param {boolean} options.toArray - Si es true, devuelve array de elementos
     * @param {boolean} options.toText - Si es true, devuelve texto, si es false, devuelve HTML
     * @param {boolean} options.completed - Si es true, devuelve objeto completo con información adicional
     * @returns {*} - Contenido encontrado o valor predeterminado, u objeto completo si completed=true
     * @requires Validator - Para validar si un resultado está vacío
     * @example
     * // Ejemplo básico
     * const title = content.getContent({
     *   selectors: 'h1',
     *   defaultValue: 'Sin título'
     * });
     * // Resultado: "Título"
     *
     * @example
     * // Usando múltiples selectores con fallback
     * const price = content.getContent({
     *   selectors: ['.price', '.cost', 'span.value'],
     *   defaultValue: '0',
     *   toText: true
     * });
     *
     * @example
     * // Obteniendo HTML en lugar de texto
     * const htmlContent = content.getContent({
     *   selectors: '.product-description',
     *   toText: false
     * });
     *
     * @example
     * // Usando el modo completed para obtener información detallada
     * const result = content.getContent({
     *   selectors: ['.price', '.cost'],
     *   completed: true
     * });
     * // Resultado: {
     * //   selectors: ['.price', '.cost'],
     * //   matchSelector: '.price',
     * //   result: '100'
     * // }
     */
    getContent({selectors, defaultValue = null, toArray = false, toText = true, completed = false}) {
        if (!selectors) return defaultValue;
        let resultData;
        if (this.validator.isArray(selectors)) {
            resultData = this.processMultipleSelectors(selectors, toArray, toText);
        } else if (this.validator.isString(selectors)) {
            const result = this.processSelector(selectors, toArray, toText);
            resultData = {
                selectors: selectors,
                matchSelector: this.validator.isEmpty(result) ? null : selectors,
                result: result
            };
        }
        // Verificar si el resultado está vacío y aplicar valor por defecto si es necesario
        resultData.result = this.getValueOrDefault(resultData.result, defaultValue);
        // Retornar formato según la bandera completed
        return completed ? resultData : resultData.result;
    }

    /**
     * Procesa un array de selectores y devuelve el primer resultado no vacío
     * @param {Array} selectors - Array de selectores a procesar
     * @param {boolean} toArray - Si es true, devuelve un array de elementos
     * @param {boolean} toText - Si es true, devuelve texto, si es false, devuelve HTML
     * @returns {Object} - Objeto con el resultado, selector utilizado y todos los selectores
     * @requires Validator - Para verificar si un resultado está vacío
     * @example
     * // Internamente usado por getContent
     * const result = this.processMultipleSelectors(
     *   ['.price', '.cost', 'span.value'],
     *   false,
     *   true
     * );
     * // Si '.price' existe y contiene "100":
     * // Resultado: {
     * //   selectors: ['.price', '.cost', 'span.value'],
     * //   matchSelector: '.price',
     * //   result: '100'
     * // }
     */
    processMultipleSelectors(selectors, toArray, toText) {
        for (const selector of selectors) {
            const result = this.processSingleSelector(selector, toArray, toText);
            if (!this.validator.isEmpty(result) &amp;&amp; !this.validator.isNil(result)) {
                return {
                    selectors: selectors,
                    matchSelector: selector,
                    result: result
                };
            }
        }
        return {
            selectors: selectors,
            matchSelector: null,
            result: null
        };
    }

    /**
     * Procesa un solo selector que puede ser string o array [selector, attribute]
     * @param {string|Array} selector - Selector o array [selector, atributo]
     * @param {boolean} toArray - Si es true, devuelve un array de elementos
     * @param {boolean} toText - Si es true, devuelve texto, si es false, devuelve HTML
     * @returns {string|Array|null} - Resultado del procesamiento del selector
     * @example
     * // Procesar un selector de texto
     * const result = this.processSingleSelector('h1', false, true);
     * // Resultado: "Título"
     *
     * @example
     * // Procesar un selector de atributo
     * const href = this.processSingleSelector(['a.link', 'href'], false, true);
     * // Resultado: "https://example.com"
     */
    processSingleSelector(selector, toArray, toText) {
        if (this.validator.isArray(selector) &amp;&amp; selector.length >= 2) {
            return this.getAttributeValue(selector[0], selector[1]);
        } else if (this.validator.isString(selector)) {
            return this.processSelector(selector, toArray, toText);
        }
        return null;
    }

    /**
     * Procesa elementos según el selector especificado
     * @param {string} selector - Selector CSS para buscar elementos
     * @param {boolean} toArray - Si es true, devuelve un array de elementos, si es false, devuelve un solo elemento
     * @param {boolean} toText - Si es true, devuelve el texto del elemento, si es false, devuelve el HTML
     * @returns {Array|string} - Array de elementos o texto/HTML del primer elemento
     * @requires cheerio - Para la selección de elementos
     * @example
     * // Obtener texto de un elemento
     * const titleText = this.processSelector('h1', false, true);
     * // Resultado: "Título"
     *
     * @example
     * // Obtener HTML de un elemento
     * const titleHtml = this.processSelector('h1', false, false);
     * // Resultado: "Título"
     *
     * @example
     * // Obtener array de elementos
     * const paragraphs = this.processSelector('p', true, false);
     * // Resultado: [&lt;p>Párrafo 1&lt;/p>, &lt;p>Párrafo 2&lt;/p>]
     */
    processSelector(selector, toArray, toText) {
        const elements = this.getElements(selector);
        if (toArray) {
            return this.elementsToArray(elements);
        }
        return toText
            ? this.getCleanText(elements)
            : this.getHtml(elements);
    }

    /**
     * Verifica si un valor está vacío y devuelve un valor predeterminado si es así
     * @param {*} value - Valor a verificar
     * @param {*} defaultValue - Valor predeterminado a devolver si está vacío
     * @returns {*} - Valor original o valor predeterminado
     * @requires Validator - Para verificar si un valor está vacío
     * @example
     * // Valor no vacío
     * const result = this.getValueOrDefault("Texto", "Predeterminado");
     * // Resultado: "Texto"
     *
     * @example
     * // Valor vacío
     * const result = this.getValueOrDefault("", "Predeterminado");
     * // Resultado: "Predeterminado"
     *
     * @example
     * // Valor null
     * const result = this.getValueOrDefault(null, "Predeterminado");
     * // Resultado: "Predeterminado"
     */
    getValueOrDefault(value, defaultValue) {
        return this.validator.isEmpty(value) ? defaultValue : value;
    }

    /**
     * Obtiene elementos que coinciden con un selector
     * @param {string} selector - Selector CSS para buscar elementos
     * @returns {Object} - Objeto jQuery/Cheerio con los elementos encontrados
     * @requires cheerio - Para la selección de elementos
     * @example
     * // Obtener todos los párrafos
     * const paragraphs = this.getElements('p');
     * // Resultado: Objeto Cheerio con todos los elementos &lt;p>
     *
     * @example
     * // Selector más complejo
     * const items = this.getElements('ul.menu > li.item');
     * // Resultado: Objeto Cheerio con los elementos &lt;li class="item"> dentro de &lt;ul class="menu">
     *
     * @example
     * // Selector vacío
     * const empty = this.getElements('');
     * // Resultado: Objeto Cheerio vacío
     */
    getElements(selector) {
        if (!selector) {
            return this.$('');
        }
        return this.$(selector);
    }

    /**
     * Obtiene el valor de un atributo de un elemento
     * @param {string} selector - Selector CSS para encontrar el elemento
     * @param {string} attribute - Nombre del atributo a obtener
     * @returns {string|null} - Valor del atributo o null si el elemento no existe
     * @requires cheerio - Para la selección de atributos
     * @example
     * // Obtener el valor del atributo href de un enlace
     * const href = this.getAttributeValue('a.link', 'href');
     * // Resultado: "https://example.com"
     *
     * @example
     * // Obtener el valor de un atributo personalizado
     * const dataId = this.getAttributeValue('.product', 'data-id');
     * // Resultado: "12345"
     *
     * @example
     * // Elemento que no existe
     * const notFound = this.getAttributeValue('.nonexistent', 'id');
     * // Resultado: null
     */
    getAttributeValue(selector, attribute) {
        const elements = this.getElements(selector);
        return elements.length ? elements.attr(attribute) : null;
    }

    /**
     * Obtiene el texto limpio del primer elemento
     * @param {Object} elements - Objeto jQuery/Cheerio con elementos
     * @returns {string} - Texto limpio del primer elemento o cadena vacía si no hay elementos
     * @requires cheerio - Para la extracción de texto
     * @example
     * // Obtener el texto limpio de un elemento
     * const elements = this.$('p.description');
     * const text = this.getCleanText(elements);
     * // Para &lt;p class="description">  Texto con   espacios   &lt;/p>
     * // Resultado: "Texto con espacios"
     *
     * @example
     * // Colección vacía
     * const empty = this.$('div.nonexistent');
     * const text = this.getCleanText(empty);
     * // Resultado: ""
     */
    getCleanText(elements) {
        if (elements.length === 0) {
            return '';
        }
        return elements.first().text().replace(/\s\s+/g, ' ').trim();
    }

    /**
     * Obtiene el HTML del primer elemento
     * @param {Object} elements - Objeto jQuery/Cheerio con elementos
     * @returns {string} - HTML del primer elemento o cadena vacía si no hay elementos
     * @requires cheerio - Para la extracción de HTML
     * @example
     * // Obtener el HTML interno de un elemento
     * const elements = this.$('div.container');
     * const html = this.getHtml(elements);
     * // Para &lt;div class="container">&lt;span>Contenido&lt;/span>&lt;/div>
     * // Resultado: "&lt;span>Contenido&lt;/span>"
     *
     * @example
     * // Colección vacía
     * const empty = this.$('div.nonexistent');
     * const html = this.getHtml(empty);
     * // Resultado: ""
     */
    getHtml(elements) {
        if (elements.length === 0) {
            return '';
        }
        return elements.first().html() || '';
    }

    /**
     * Convierte elementos a un array
     * @param {Object} elements - Objeto jQuery/Cheerio con elementos
     * @returns {Array} - Array de elementos
     * @requires cheerio - Para la manipulación de colecciones de elementos
     * @example
     * // Convertir colección de elementos a array
     * const paragraphs = this.$('p');
     * const arrayOfParagraphs = this.elementsToArray(paragraphs);
     * // Para HTML con 3 párrafos
     * // Resultado: [&lt;p>Párrafo 1&lt;/p>, &lt;p>Párrafo 2&lt;/p>, &lt;p>Párrafo 3&lt;/p>]
     *
     * @example
     * // Colección vacía
     * const empty = this.$('div.nonexistent');
     * const emptyArray = this.elementsToArray(empty);
     * // Resultado: []
     */
    elementsToArray(elements) {
        return [...elements];
    }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Hecho con <small>❤</small> por <a
        href="https://github.com/xdany01">@xdany01</a> usando la plantilla de <a
        href="https://github.com/clenemt/docdash">docdash</a>.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
